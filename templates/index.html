{% extends 'base.html' %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="banner">
  <div class="container">
    <h2>Ecommerce HTML Template</h2>
    <p>Здесь можно добавить описание и призыв к действию.</p>
    <a class="btn btn-primary" href="{% url 'mainapp:products' %}">Смотреть товары</a>
  </div>
</div>

<div class="featured-items">
  <div class="container">
    <h1>Жылы ұсыныс</h1>
    <div class="owl-carousel owl-theme">

{% for product in products %}
  <a href="{% url 'mainapp:product' product.id %}">
    <div class="featured-item">
      {% if product.image %}
        <img src="{{ product.image.url }}" alt="{{ product.name }}">
      {% else %}
        <img src="{% static 'assets/images/noimage.jpg' %}" alt="Нет изображения">
      {% endif %}
      <h4>{{ product.name }}</h4>
      <h6>{{ product.price }} тг.</h6>
    </div>
  </a>
{% empty %}
  <p>Товаров пока нет.</p>
{% endfor %}
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'assets/js/owl.carousel.min.js' %}"></script>
<script>
  $(document).ready(function(){
    $(".owl-carousel").owlCarousel({
      items: 3,
      loop: true,
      margin: 10,
      nav: true,
      dots: true,
      autoplay: true,
      autoplayTimeout: 3000
    });
  });
</script>
{% endblock %}
